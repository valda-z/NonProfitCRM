@model NonProfitCRM.Models.HomeModel
@{
    ViewBag.Title = "Dashboard";
}

<div class="content-wrap">
    <!-- main page content. the place to put widgets in. usually consists of .row > .col-md-* > .widget.  -->
    <main id="content" class="content" role="main">
        <div class="row">
            <div class="col-md-6 widget-container ui-sortable">
                <section class="widget" id="shares-widget" data-widgster-load="demo/ajax/widgets/shares.php">
                    <header class="ui-sortable-handle">
                        <h5>
                            <span class="label label-primary"><i class="fa fa-tasks"></i></span> &nbsp;
                            Otevřené <span class="fw-semi-bold">Úkoly</span>
                        </h5>
                        <div class="widget-controls">
                        </div>
                    </header>
                    <div class="widget-body no-padding">
                        <div class="list-group list-group-lg">

                            @foreach (var item in Model.TaskList)
                            {
                                string icon = "fa-circle";
                                switch (item.Entity)
                                {
                                    case "Event":
                                        icon = "fa-bullhorn";
                                        break;
                                    case "Company":
                                        icon = "fa-university";
                                        break;
                                    case "NonProfitOrg":
                                        icon = "fa-group";
                                        break;
                                }

                                <a href="@Url.Action("Detail", "Task", new { id = item.Id, returnUrl = Request.RawUrl })" class="list-group-item">
                                    <span class="thumb-sm pull-left mr">
                                        <i class="fa @Html.Raw(icon) mt-0" style="font-size:24px"></i>
                                    </span>
                                    @if (item.DueDate < DateTime.Now)
                                    {
                                        <span class="thumb-sm pull-left mr">
                                            <i class="fa fa-exclamation-circle text-danger mt-0" style="font-size:24px"></i>
                                        </span>
                                    }
                                    <i class="fa fa-circle pull-right text-@Html.Raw(item.StatusColor) mt-sm"></i>
                                    <h5 class="no-margin"><b>@item.EntityName</b> - @item.Description</h5>
                                    <small class="text-muted"><b>@NonProfitCRM.Components.DateHelper.FormatDateShort(item.DueDate, User.Identity.Name) - @item.AssignedTo</b> - @item.Note</small>
                                </a>
                            }
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-md-6 widget-container ui-sortable">
                <section class="widget">
                    <header>
                        <h5>Collapsed by default &amp; locked</h5>
                        <div class="widget-controls">
                        </div>
                    </header>
                    <div class="widget-body">
                        <blockquote>
                            There are no limits. There are plateaus, but you must not stay there, you must go beyond
                            them. If it kills you, it kills you. A man must constantly exceed his level.
                            <footer>
                                Bruce Lee
                            </footer>
                        </blockquote>
                        <p>To make a widget initially collapsed just add <code>data-widgster-collapsed="true"</code> attribute to <code>.widget</code>.</p>
                        <p>To make it locked (prevent dragging) add <code>.locked</code> class.</p>
                    </div>
                </section>
                <section class="widget bg-gray">
                    <div class="widget-body no-padding">
                        <div class="jumbotron handle bg-gray text-white mb-0 ui-sortable-handle">
                            <div class="container">
                                <h1>Draggable story!</h1>
                                <p class="lead">
                                    <em>Build</em> your own
                                    interfaces! Sit back and relax.
                                </p>
                                <a class="btn btn-danger btn-lg" data-widgster="restore" style="display: none;">
                                    Want to go back?
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</div>

